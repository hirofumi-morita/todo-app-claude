- name: default
  kind: postgres
  configuration:
    connection_info:
      database_url:
        from_env: HASURA_GRAPHQL_DATABASE_URL
      isolation_level: read-committed
      use_prepared_statements: false
  tables:
    - table:
        name: users
        schema: public
      object_relationships: []
      array_relationships:
        - name: todos
          using:
            foreign_key_constraint_on:
              column: user_id
              table:
                name: todos
                schema: public
      select_permissions:
        - role: user
          permission:
            columns:
              - id
              - email
              - is_admin
              - created_at
              - updated_at
            filter:
              id:
                _eq: X-Hasura-User-Id
      update_permissions: []
      delete_permissions: []
    - table:
        name: todos
        schema: public
      object_relationships:
        - name: user
          using:
            foreign_key_constraint_on: user_id
      array_relationships: []
      select_permissions:
        - role: user
          permission:
            columns:
              - id
              - user_id
              - title
              - description
              - completed
              - created_at
              - updated_at
            filter:
              user_id:
                _eq: X-Hasura-User-Id
      insert_permissions:
        - role: user
          permission:
            check:
              user_id:
                _eq: X-Hasura-User-Id
            columns:
              - title
              - description
              - completed
      update_permissions:
        - role: user
          permission:
            columns:
              - title
              - description
              - completed
            filter:
              user_id:
                _eq: X-Hasura-User-Id
      delete_permissions:
        - role: user
          permission:
            filter:
              user_id:
                _eq: X-Hasura-User-Id
